window.__require=function t(e,i,n){function s(h,c){if(!i[h]){if(!e[h]){var a=h.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+h+"'")}h=a}var u=i[h]={exports:{}};e[h][0].call(u.exports,function(t){return s(e[h][1][t]||t)},u,u.exports,t,e,i,n)}return i[h].exports}for(var o="function"==typeof __require&&__require,h=0;h<n.length;h++)s(n[h]);return s}({AudioEngine:[function(t,e,i){"use strict";cc._RF.push(e,"3bb8bXQNbtGQLlUlh6pImlR","AudioEngine"),cc.Class({extends:cc.Component,properties:{audio:{default:null,type:cc.AudioClip}},onLoad:function(){this.current=cc.audioEngine.play(this.audio,!0,1)},update:function(t){},onDestory:function(){cc.audioEngine.stop(this.current)}}),cc._RF.pop()},{}],Bullet:[function(t,e,i){"use strict";cc._RF.push(e,"02d87yfa2tNHJi9C2MoWaEz","Bullet");var n=t("Global");cc.Class({extends:cc.Component,properties:{},start:function(){},update:function(t){this.moveBullet(t)},moveBullet:function(t){this.node.y+=500*t},onCollisionEnter:function(t,e){var i=t.node.getComponent("Enemy");1===t.tag&&i&&!i.checkDead()&&(n.game.recyleBullet(e.node),i.hit()),2===t.tag&&i&&!i.checkDead()&&(n.game.recyleBullet(e.node),i.hit()),3===t.tag&&i&&!i.checkDead()&&(n.game.recyleBullet(e.node),i.hit())}}),cc._RF.pop()},{Global:"Global"}],Constant:[function(t,e,i){"use strict";cc._RF.push(e,"34345VkNElDhYsWzP/+Y26n","Constant"),e.exports={ROOT:"res/raw-assets/"},cc._RF.pop()},{}],Enemy:[function(t,e,i){"use strict";cc._RF.push(e,"8e3eavnf/1Mo5+QL7n/ZqN9","Enemy");var n=t("Global");cc.Class({extends:cc.Component,properties:{enemyTag:{type:cc.Integer,default:0},brokenAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.hitNum=0},start:function(){},update:function(t){1===this.enemyTag&&(this.node.y-=5),2===this.enemyTag&&(this.node.y-=4),3===this.enemyTag&&(this.node.y-=1)},hit:function(){if(!this.checkDead()&&(1===this.enemyTag&&(this.isDead=!0,cc.audioEngine.play(this.brokenAudio,!1,1),this.anim=this.node.getComponent(cc.Animation),this.anim.on("finished",this.finished,this),this.anim.play()),2===this.enemyTag&&6==++this.hitNum&&(this.isDead=!0,this.hitNum=0,cc.audioEngine.play(this.brokenAudio,!1,1),this.anim=this.node.getComponent(cc.Animation),this.anim.on("finished",this.finished,this),this.anim.play()),3===this.enemyTag&&50==++this.hitNum)){this.isDead=!0,this.hitNum=0,cc.audioEngine.play(this.brokenAudio,!1,1),this.anim=this.node.getComponent(cc.Animation),this.anim.on("finished",this.finished,this);var t=this.getBrokenClip();this.anim.play(t.name)}},finished:function(t,e){this.anim.off("finished",this.finished,this);var i=this.anim.defaultClip;this.anim.setCurrentTime(0,i.name),this.anim.sample(i.name),3===this.enemyTag&&this.anim.play(i.name),n.game.recyleEnemy(this.enemyTag,this.node),this.isDead=!1},getBrokenClip:function(){var t=this.anim.getClips();return t[t.length-1]},checkDead:function(){return this.isDead}}),cc._RF.pop()},{Global:"Global"}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"38c0e4TN6NCgbFNjIjD9+aE","Game");var n=t("Global"),s=t("Utils"),o="start",h="end";cc.Class({extends:cc.Component,properties:{bg:{type:cc.Node,default:null},speed:{type:cc.Float,default:250},hero:{type:cc.Node,default:null},bullet:{type:cc.Prefab,default:null},enemy1:{type:cc.Prefab,default:null},enemy2:{type:cc.Prefab,default:null},enemy3:{type:cc.Prefab,default:null},menu:{type:cc.Node,default:null}},onLoad:function(){n.game=this,this.menu.zIndex=10,this.showMenu(),cc.director.getCollisionManager().enabled=!0,this.bulletPool=new cc.NodePool,this.bulletDistance=this.bulletCount=8,this.heroStartPos=this.hero.position,this.hero.zIndex=1,this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},start:function(){this.designSize={width:cc.winSize.width||cc.view.getDesignResolutionSize().width,height:cc.winSize.height},this.gameStatus=null},update:function(t){this.gameStatus===o&&(this.scrollBackground(t),this.updateBullet(),this.updateEnemy(t,1,1),this.updateEnemy(t,2,3.5),this.updateEnemy(t,3,20.33))},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},endGame:function(){this.gameStatus=h,this.node.children.forEach(function(t){-1!==t.name.indexOf("enemy")&&t.destroy(),"bullet"==t.name&&t.destroy()}),this.hero.setPosition(this.heroStartPos),this.showMenu()},showMenu:function(){this.menu.active=!0},hideMenu:function(){this.menu.active=!1},startClick:function(){this.gameStatus=o,this.hideMenu()},scrollBackground:function(t){if(this.bg.y-=this.speed*t,this.bg.y<=-this.designSize.height){var e=Math.abs(this.bg.y)-this.designSize.height;this.bg.y=-e}},touchStart:function(t){},touchMove:function(t){if(this.gameStatus===o){var e=t.getDelta();this.hero.x+=e.x,this.hero.y+=e.y,this.crossHandler(e)}},touchCancel:function(t){},touchEnd:function(t){},updateEnemy:function(t,e,i){this["enemy".concat(e,"Timer")]||(this["enemy".concat(e,"Timer")]=0),this["enemy".concat(e,"Timer")]>=i&&(this["enemy".concat(e,"Timer")]=0,this.createEnemy(e),this.enemyCrossHandler(e)),this["enemy".concat(e,"Timer")]+=t},createEnemy:function(t){var e=null;this["enemy".concat(t,"Pool")]||(this["enemy".concat(t,"Pool")]=new cc.NodePool),e=this["enemy".concat(t,"Pool")].size()>0?this["enemy".concat(t,"Pool")].get():cc.instantiate(this["enemy".concat(t)]),this.node.addChild(e),e.name="enemy".concat(t);var i=-this.designSize.width/2+e.width/2,n=this.designSize.width/2-e.width/2;e.setPosition(cc.v2(s.randomNum(i,n),this.designSize.height/2+e.height/2))},recyleEnemy:function(t,e){this["enemy".concat(t,"Pool")].put(e)},enemyCrossHandler:function(t){var e=this;this.node.children.forEach(function(i){i.name==="enemy".concat(t)&&i.y<=-e.designSize.height/2-i.height/2&&e.recyleEnemy(t,i)})},updateBullet:function(){this.bulletDistance++,this.bulletDistance>=this.bulletCount&&(this.bulletDistance=0,this.createBullet(),this.bulletCrossHandler())},createBullet:function(){var t=null;t=this.bulletPool.size()>0?this.bulletPool.get():cc.instantiate(this.bullet),this.node.addChild(t),t.name="bullet",t.setPosition(cc.v2(this.hero.x,this.hero.y+this.hero.height/2))},recyleBullet:function(t){this.bulletPool.put(t)},bulletCrossHandler:function(){var t=this;this.node.children.forEach(function(e){"bullet"===e.name&&e.y>=t.designSize.height/2&&t.recyleBullet(e)})},crossHandler:function(t){this.hero.x-this.hero.width/2<=-this.designSize.width/2&&(this.hero.x-=t.x),this.hero.y-this.hero.height/2<=-this.designSize.height/2&&(this.hero.y-=t.y),this.hero.x+this.hero.width/2>=this.designSize.width/2&&(this.hero.x-=t.x),this.hero.y+this.hero.height/2>=this.designSize.height/2&&(this.hero.y-=t.y)}}),cc._RF.pop()},{Global:"Global",Utils:"Utils"}],Global:[function(t,e,i){"use strict";cc._RF.push(e,"6c8e17TE2xH4baRzhXE6jcE","Global"),e.exports={game:null},cc._RF.pop()},{}],Hero:[function(t,e,i){"use strict";cc._RF.push(e,"03f95EmXIFK4bNPTkm28MKu","Hero");var n=t("Global");cc.Class({extends:cc.Component,properties:{brokenAudio:{default:null,type:cc.AudioClip}},start:function(){},onCollisionEnter:function(t,e){var i=t.node.getComponent("Enemy");if(i&&!i.checkDead()){this.anim=e.getComponent(cc.Animation);var n=this.anim.getClips(),s=n[n.length-1];cc.audioEngine.play(this.brokenAudio,!1,1),this.anim.on("finished",this.finished,this),this.anim.play(s.name)}},finished:function(t,e){this.anim.off("finished",this.finished,this);var i=this.anim.defaultClip;this.anim.setCurrentTime(0,i.name),this.anim.sample(i.name),this.anim.play(i.name),n.game.endGame()}}),cc._RF.pop()},{Global:"Global"}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"2fd7a/vDJhIrIM+kkbLYKug","Utils"),e.exports={randomNum:function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+1,10);case 2:return parseInt(Math.random()*(e-t+1)+t,10);default:return 0}}},cc._RF.pop()},{}]},{},["AudioEngine","Bullet","Constant","Enemy","Game","Global","Hero","Utils"]);