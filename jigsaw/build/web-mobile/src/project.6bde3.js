window.__require=function o(t,e,n){function c(s,r){if(!e[s]){if(!t[s]){var h=s.split("/");if(h=h[h.length-1],!t[h]){var a="function"==typeof __require&&__require;if(!r&&a)return a(h,!0);if(i)return i(h,!0);throw new Error("Cannot find module '"+s+"'")}s=h}var d=e[s]={exports:{}};t[s][0].call(d.exports,function(o){return c(t[s][1][o]||o)},d,d.exports,o,t,e,n)}return e[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)c(n[s]);return c}({AudioEngine:[function(o,t,e){"use strict";cc._RF.push(t,"55c53mfUrpEcaF0wG7OoUaQ","AudioEngine");var n=null;cc.Class({extends:cc.Component,properties:{audio:{default:null,type:cc.AudioClip}},onLoad:function(){cc.log("bgAudio",n),null===n&&(n=cc.audioEngine.play(this.audio,!0,1))},stop:function(){cc.audioEngine.stop(n)},onDestroy:function(){}}),cc._RF.pop()},{}],Block:[function(o,t,e){"use strict";cc._RF.push(t,"97d83MPn35K6JDR3HaqFHlH","Block");var n=o("Global");cc.Class({extends:cc.Component,properties:{},init:function(o,t,e){var n=this.node.getComponent(cc.Sprite),c=new cc.SpriteFrame(o,cc.rect(t.x*e.width,t.y*e.height,e.width,e.height));n.spriteFrame=c,this.node.opacity=255},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},touchStart:function(o){this.node.opacity=128,this.startPos=this.node.position,this.node.zIndex=1},touchMove:function(o){var t=o.getDelta();this.node.x+=t.x,this.node.y+=t.y},touchCancel:function(o){this.resetTouchStart()},touchEnd:function(o){this.resetTouchStart()},resetTouchStart:function(){this.node.opacity=255,this.node.zIndex=0;var o=this.convert2Index(this.startPos),t=this.convert2Index(this.node.position),e=null;t.x>=0&&t.x<4&&t.y>=0&&t.y<4&&(e=n.game.blockNodeArr[t.y][t.x]),e?(this.node.setPosition(e.position),e.setPosition(this.startPos),n.game.blockNodeArr[o.y][o.x]=e,n.game.blockNodeArr[t.y][t.x]=this.node,n.game.checkSuccess()&&n.game.successHandler()):this.node.setPosition(this.startPos)},convert2Index:function(o){var t=this.node.width,e=this.node.height,c=o.x-n.game.leftGap+t/2,i=o.y+n.game.topGap-e/2;return{x:c>=0?Math.abs(parseInt(c/t)):-1,y:i<=0?Math.abs(parseInt(i/e)):-1}},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)}}),cc._RF.pop()},{Global:"Global"}],ButtonManager:[function(o,t,e){"use strict";cc._RF.push(t,"909b6SF7OxKbbOYnSuUkvcI","ButtonManager");var n=o("Global");cc.Class({extends:cc.Component,properties:{btnAudio:{default:null,type:cc.AudioClip}},start:function(){},onPlayClick:function(o,t){cc.audioEngine.play(this.btnAudio,!1,1),cc.director.loadScene("game",function(){})},onBackMainClick:function(){cc.audioEngine.play(this.btnAudio,!1,1),cc.director.loadScene("jigsaw")},onSetButton:function(){cc.audioEngine.play(this.btnAudio,!1,1),n.game.onLoad()}}),cc._RF.pop()},{Global:"Global"}],Constant:[function(o,t,e){"use strict";cc._RF.push(t,"39ba5MpKyJADrl52OIUpOCO","Constant"),t.exports={ROOT:"res/raw-assets/"},cc._RF.pop()},{}],Game:[function(o,t,e){"use strict";cc._RF.push(t,"ae83f5bC7pA3JyCD/rW2C71","Game");var n=o("Global");cc.Class({extends:cc.Component,properties:{blockPrefab:{default:null,type:cc.Prefab},win:{default:null,type:cc.Node}},onLoad:function(){var o=this;n.game=this,this.win.active=!1,this.destoryBlockComponent(),this.blockNodeArr=[],this.leftGap=0,this.topGap=0,cc.loader.loadRes("textures/jigsaw",cc.Texture2D,function(t,e){if(t)return cc.log(t);var n=cc.winSize,c=Math.min(n.width,n.height),i=e.width,s=e.height,r=Math.min(i,s),h=r/4,a=c/r,d=i*a,l=s*a;d*=.9,l*=.9;var u=Math.min(d,l)/4;o.leftGap=(n.width-d)/2,o.topGap=(n.height-l)/2;for(var p=0;p<4;p++){o.blockNodeArr[p]=[];for(var f=0;f<4;f++){var C=cc.instantiate(o.blockPrefab);o.node.addChild(C),C.width=u,C.height=u,C.setPosition(cc.v2(f*u+o.leftGap,-p*u-o.topGap)),C.getComponent("Block").init(e,cc.v2(f,p),cc.size(h,h)),C.mPos=cc.v2(f,p),o.blockNodeArr[p][f]=C}}o.randomPos()})},randomPos:function(){for(var o=0;o<4;o++)for(var t=0;t<4;t++){var e=this.blockNodeArr[o][t],n={x:parseInt(4*Math.random()),y:parseInt(4*Math.random())},c=this.blockNodeArr[n.y][n.x],i=e.position,s=c.position;e.setPosition(s),c.setPosition(i),this.blockNodeArr[o][t]=c,this.blockNodeArr[n.y][n.x]=e}},checkSuccess:function(){for(var o=0;o<4;o++)for(var t=0;t<4;t++){var e=this.blockNodeArr[o][t];if(e.mPos.y!==o||e.mPos.x!==t)return!1}return!0},successHandler:function(){this.destoryBlockComponent(),this.win.active=!0},destoryBlockComponent:function(){if(this.blockNodeArr instanceof Array)for(var o=0;o<4;o++)for(var t=0;t<4;t++)if(this.blockNodeArr[o]&&this.blockNodeArr[t]){var e=this.blockNodeArr[o][t];e.getComponent("Block").onDestroy(),e.removeFromParent()}}}),cc._RF.pop()},{Global:"Global"}],Global:[function(o,t,e){"use strict";cc._RF.push(t,"3d81eQ/Bx1Mr7kflN2iKjqh","Global"),t.exports={game:null},cc._RF.pop()},{}],ParticleClick:[function(o,t,e){"use strict";cc._RF.push(t,"13c67T0dbVLlIAlsj/QdrbD","ParticleClick"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this._initNodeTouchEvent()},_initNodeTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegin,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},_destroyTouchEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegin,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),cc.log("\u9500\u6bc1\u4e8b\u4ef6...")},_onTouchBegin:function(o){var t=o.getLocation(),e=this.node.convertToNodeSpaceAR(t);this.newClickNode(e,function(o){var t=this;o&&(o.getComponent(cc.ParticleSystem).resetSystem(),cc.log("\u5b50\u8282\u70b9\u6570:"+this.node.children.length),this.node.children.forEach(function(o){"clickNode"===o.name&&(o.getComponent(cc.ParticleSystem).stopped&&(t._clickPool.put(o),cc.log("\u987a\u5229\u56de\u6536...")))}))}.bind(this))},_onTouchMoved:function(o){cc.log("_onTouchMoved")},_onTouchEnd:function(o){cc.log("_onTouchEnd")},_onTouchCancel:function(o){cc.log("_onTouchCancel")},onDestroy:function(){this._destroyTouchEvent()},newClickNode:function(o,t){var e=null;this._clickPool||(this._clickPool=new cc.NodePool),this._clickPool.size()>0?(e=this._clickPool.get(),cc.log("\u56de\u6536\u7684\u5143\u7d20\uff1a",e),this.setClickNode(e,o,t)):cc.loader.loadRes("prefab/smoke",cc.Prefab,function(n,c){n||(e=cc.instantiate(c),this.setClickNode(e,o,t))}.bind(this))},setClickNode:function(o,t,e){o.name="clickNode",o.setPosition(t),this.node.addChild(o),e&&e(o)}}),cc._RF.pop()},{}],Utils:[function(o,t,e){"use strict";cc._RF.push(t,"4fe28cck8BID7nHU8gALmhU","Utils"),t.exports={sayHello:function(){cc.log("hello")}},cc._RF.pop()},{}]},{},["AudioEngine","Block","ButtonManager","Constant","Game","Global","ParticleClick","Utils"]);